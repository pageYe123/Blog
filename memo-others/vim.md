## 一、VIM 普通模式

### 1.1）跳转指令

1) 行间跳转：

跳转到指定行：`ngg` 或 `nG`或`:n`

跳到到文本的最后一行：按`G`，即`shift+g`

跳转到文本的第一行：`gg`

跳转到屏幕的最后一行：`L`

2. 单行跳转：

跳转到行首：`0`

跳转到行尾：`$`

跳转到指定字符的前一个字符：`t<Character>`

跳转到行首，并进入插入模式：`A`

跳转到行尾，并进入插入模式：`I`

当前页页首：`H`

当前页页尾：`L`

3. 单词跳转：

跳转到下一个单词头部：`w`

跳转到下一个单词尾部：`e`

跳转到上一个单词头部：`b`

跳到最后一行的最后一个字符： 先重复 1 的操作即按“G”，之后按“$”键，即“shift+4”。

4. 标志位跳转：
    1. 手动标志位
        1. 设置跳转标志位：`mx`
        2. 跳转到上个跳转标志位：``x`
    2. 自动标志位（h、j、k、l 不算跳转）
        1. 跳转到上次跳转标志位：<code>``</code>



### 1.2）修改、替换

- `cw`正向修改一个单词
- `cc` 改变替换整行
- `c2b` 逆向修改 2 个单词
- `~`将当前字母进行大小写转换
- `C`从光标位置删除至行尾

### 1.3）撤销

`u`撤销刚才的动作

`ctrl+r`还原撤销

### 1.4）删除（剪切）

字符的删除：

`x`删除光标所在处字符
`X`删除光标所在前字符

单词与行的删除（剪切）：

- 经常搭配行粒度可视化模式(`V`键)和粘贴功能(`p`)使用，用于剪切内容，相当于 Windows 的 ctrl+x。
- `dd`删除整行
- `dw` 删除到下一个单词开头包括空白符
  
    `de` 删除到本单词末尾
    
    `dE` 删除到本单词末尾包括标点在内，如 don't do，don't 会被视作一个单词
    `db` 删除到前一个单词
    `dB` 删除到前一个单词包括标点在内
- 删除到行首`d+^`，相当于`d+shift+6`
- 删除到行尾`d+$`，相当于`d+shift+4`

利用 Text object selection 删除成对符号内的内容：

- 删除圆括号的内容（不含圆括号）：`di(` 或 `di)`
    意思是 delete all content **i**nside parenthesis
- 删除圆括号的内容（包含圆括号）：`da(`或`da)`
    意思是 delete parenthesis and all content inside parenthesis
- 同理可删除单双引号、中括号、大括号的内容……

**以上命令删除文本后，所删文本进入未命名寄存器。**

### 1.5）整行缩进

方法一：整行向右移动 1 个 tab 键( 4 个空格)：按两次大于号`>>`或小于号`<<`

方法二：先更换到可视化模式，然后按一次大于号`>`或小于号`<`

### 1.6）复制粘贴

`数字+yy`复制当前行向下<数字>行

`p`粘贴，粘贴到当前行的下面

可视化模式下按 `"+yy` 复制系统剪切板，这样就可以粘贴到编辑器之外的应用内（默认复制到未命名寄存器`""`）

#### 1.6.1）VIM 跨文件复制

VIM 复制一个文件的多行到另一个文件的正确做法是要同时打开两个文件，

比如要把 add.cpp 的内容复制到 main.cpp

首先`vim add.cpp main.cpp`

在 add.cpp 中复制好后输入`:n`切换到下一个文件，即 main.cpp（输入`:N`切换到上一个文件 add.cpp），此时再粘贴到 main.cpp

#### 1.7）文本/代码折叠

za -- 打开/关闭当前折叠；
zo -- 打开当前折叠；
zf -- 创建折叠的命令，可以在一个可视区域上使用该命令；
zi -- enable/disable fold;





## 二、VIM 插入模式

typing……



## 三、VIM 可视化模式

`v`进入可视化模式, 移动光标选择文本。`y`回到普通模式

VISUAL BLOCK 和 VISUAL LINE 模式，二者都是可视化模式。

VISUAL LINE 是行粒度可视化模式，一行一个单位，一行一行选，由`shift+v`触发；VISUAL BLOCK 是块粒度可视化模式，更加自由，选择一个矩形内的文本，由`control+v`触发。

### 块可视化模式下进行多列的同时修改

#### 1) 添加多行注释

(1) 通过方向键将光标定位到要去注释内容的首行或未行
(2) 按 esc 键
(3) 按 ctrl + v（Mac：control + v）进入 VISUAL BLOCK 模式
(4) 通过方向键选择要添加注释的多行内容
(5) 按 shift + i (实际上就是输入大写 I)
(6) 在首行或末行输入：#
(7) 按 esc 键，VIM 编辑器会自动在其他行首添加注释符 #

#### 2) 取消多行注释

(1) 通过方向键将光标定位到要去注释内容的首行或尾行

(2) 按 esc 键 

(3) 按 `control+v` 进入 VISUAL BLOCK 模式 

(4) 通过方向键选择要去掉注释的多行内容

(5) 按 d 键，执行删除



## 四、选择模式

作用：用于删掉光标所选文字，并进入输入模式输入。

4.1）可视化模式 → 选择模式：

先进入可视化模式，接着按`control+g`，之后会用输入的字符替代所选文字。

4.2）选择模式 → 可视化模式：

`control+o`

## 五、VIM 的命令模式

在 VIM 中创建目录层级

```vim
# 建立文件夹
:!mkdir <mydir>
# 建立文件
:sp <mydir/mytest.txt>
```

不退出 VIM 执行 Shell 命令。只能执行 Shell 自带命令，alias 的命令执行不了。

```plain
:!<shell-command>
```

退出 vim 返回终端

```shell
:shell
```

文件在外部有修改，想刷新更新文件(重新载入文件)。如果是 iTerm2 会提示，按 `l` 就是 Load File。

```shell
:e
```

查看寄存器的详细帮助说明

```shell
:help registers
```

### 5.1）搜索

- 简单搜索

`/<搜索内容>`按回车

- 高级搜索

`:vimgrep /pattern/gj %`      

`%`表示在当前打开文件中查找

g：表示是否把每一行的多个匹配结果都加入
j：表示是否搜索完后定位到第一个匹配位置

- 匹配项切换

`:cn` 查找下一个匹配项
`:cp` 查找上一个匹配项





## 六、其他

`Ctrl+z`当前 vim 程序转入后台，可用`fg`命令将后台进程恢复到前台。

VIM 编辑器的配置在`~/.vimrc`中

VI 有 3 种模式：插入模式、普通模式、低行命令模式。



### 6.1）VIM 寄存器

10 种类型的寄存器（registers）

1. The unnamed register ""
2. 10 numbered registers "0 to "9
3. The small delete register "-
4. 26 named registers "a to "z or "A to "Z
5. Three read-only registers ":, "., "%
6. Alternate buffer register "#
7. The expression register "=
8. GUI 选择文本寄存器 `"*`, `"+` and `"~`
    `"*` 和 `"+`。这两个寄存器是和系统相通的，前者关联系统选择缓冲区，后者关联**系统剪切板**（即一般情况下 ctrl+c 和 ctrl+v 使用的剪切板）,通过它们可以和其他程序进行数据交换。
9. The black hole register "_
10. Last search pattern register "/



## 七、学习资料

https://www.cnblogs.com/yinheyi/p/6944144.html
